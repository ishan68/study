REFRENCE VIDEO_-----------------

https://www.youtube.com/watch?v=G4KJPLDGMiI



VPC - its a virtual private cloud and completely out of the other insfrastructure on aws.You get full control upon its resources and flexibility with enhasnced security.
Its a virtual data centre. it doesn't communicate with other vpc itself. its region specific and each region you can have 5 VPC including default vpc

Components :-
 :- 1 - IP addresses 
  
  Ranges - class A - 10.x.x.x
           class B - 172 .31.x.x
           class C - 192.168.x.x
  
  
  :-2 - Subnets - its a complete range of private ip's and it consists of instances and each subnet is associated to a specific availibility zone
   there are two type of subnets   
   1 public e.g web servers
   2 private e.g database servers we don't allot public ip's to private subnet and does not provide internet access
   we have to expose webserver to internet in order to access it publically. which we can do by allocating public or elastic ip's and should have access to internet gateway
    The linking between internet gateway and public subnet is done by route table
   
          
  :-3 internet gateway - it opens the access to the internet and provides internet access to vpc only one single igw is sufficient fo one vpc
  :-4 Route table - Its a set of routes which determines how the network traffic will flow in and out of a vpc. It is a set of routes
  :-5 NAT device - its a optional feature. It stands for network address translation device. It helps the instances in the private subnet to download the patches/updates
  its launched in the public subnet and you associat an elastic ip to it
  In order to connect private subnet to internet, Private subnet .i.e database will connect to NAT device through ROUTE TABle and then NAT device will
  forward the traffic to internet. The NAT device will change the source ip to its own ip
  e.g if private subnet has ip - 10.0.0.2 and the nat device has any public ip then it will show source ip as its onw elastic ip so that mean NAT device will hide the
  private ip of subnet and act as that it has made a request to access internet
  
  NAT device is of two typers
  
  1 - NAT gateway - its a virtual gateway  and it is managed by aws and capable of high bandwidth
  
  
  2 - NAT instance - its in instance and it is managed by customer and capable of low bandwith requirement
  
  
  6:- NACL - network access control list - its a virtual firewall that applies to subnets
           - security group is a type of firewall applies to EC2 instances 
           The difference between these two firewalls are that NACL will allow or deny all traffic but security group will allow specific traffic to
           specific instance
  
  
  7:- VPG - virtual private gateway
       CG - customer gateway 
       
       These both are used for vpn connection
       
  ################################################################
  Different terms in vpc
  
  CIDR - Classless inter domain routing  its the ip address range in vpc and subnet
  e.g - cidr for vpc - 10.0.0.0/16
  ipv4 is 32 bits means each octet is of 8bits
  SO in 10.0.0.0/16 the /16 means  that first two bits are for netwoking and remaining two bits are of hosts.
  For different subnets we will use cidr e.g for subnet1 - 10.0.0.0/24.  i.e the first 3 octet are for networking and just one octet will change
                                                 subnet2 - 10.0.1.0/24
                                                 subnet3 - 10.0.2.0/24
                                                 subnet3 - 10.0.3.0/24
                                            --so on till.  10.0.255.0/24
                                            
                                            
  With this cidr we can have 256 subnets and  subnet3 instances  will have  - 10.0.2.1/32
                                                                                      10.0.2.2/32. and so on till 10.0.2.255/32
                                                                                      
  SO total numbwe of instances with I can have in cidr 10.0.0.0/16 in vpc will be 256x256 = 65536
  
  
  Public subnet - Now the every instance in public subnet should be provided with public ip and you have to attach IGW to public subnet and associate it with route table
  The public subnet mostly consists of webservers
  
  Private subnet - consists of database and isolated from the internet so the question is how do I isolate it?
  The answer is that you don't provide public ip's to private subnet instances(databases)
  
  Practical
1.  Go to vpc and create new vpc.. give it a name and cidr of 10.0.0.0/16 create vpc now
2.now create subnet public_subnet  add it to your vpc and give subnet 10.0.1.0/24
3.now create second subnet private_subnet and give it 10.0.2.0/24
4.Now create a internet gateway and attach it to vpc from selecting it left pane
5.Now attach it to custom_vpc
Now by doing this will create a route table which will be connected to vpc and only local traffic will flow. now instances can talk to each other internally
But we need to create route table for public subnet only
6- now create route table and go to its routes and edit routes add destination 0.0.0.0/0 and target as internet gateway
now go to subnet association and select public subnet and save it...now you can check route table association by going to subnets
NOte - You can allocate one route table only to one subnet but same route table can be allocated to mutliple subnet on same vpc
7 - Now you can launch ec2 instance in public subnet by going to ec2 dashboard and select custom_vpc from configuration detail and select public vpc
do it for public instance as well 
By checking you will see there is no public ip here so attach elastic ip to it
8 - Now the private subnet is not associated with public ip so its private. But we cann access it through by first sshing in public Instance and after that to
private subnet via local route
To get into private instance
do - ssh-add -k ishan.pem
ssh -A ubuntu@3.108.23.91
now use private ip to ssh into private instanbce
e.g ssh ubuntu@10.0.2.26 but the internet on it will not wok as it is connected to internet
9 - for this will have to create NAT gateway so go to aws and select NAT gateway and select public_subnet and allocate elastic ip to it and click create
In order to communicate private subnet to NAT we will have to create new route table and assign it to private subnet
Now go to roues and edit it by adding 0.0.0.0/0 and with NAT now go to subnet association and assign private subnet and save it

This is it hence the VPC is created

--------------------------------------------------------------
VPC peering - it is used to peer vpc's together connection can be elastablished bwtween separet rehgion and accounts




  
  
  
  
  
